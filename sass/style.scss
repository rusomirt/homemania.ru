// ----------------------------------------------------------------------------
// File includes
// ----------------------------------------------------------------------------

// Bootstrap
@import "bootstrap/bootstrap";
// Bootstrap default variables are overridden in bootstrap/_custom.scss

// Variables
@import "variables";

// Mixins
@import "mixins";

// ----------------------------------------------------------------------------
// Global styles
// ----------------------------------------------------------------------------

body {
  font-family: $global-txt-font;
  @include responsive-prop(font-size, $global-txt-font-sizes);
  color: $global-txt-color;
  line-height: 1.15;
}

h1, h2, h3, h4, h5, h6 {
  font-family: $global-headers-font;
}
h1 {
  @include responsive-prop(font-size, $global-h1-font-sizes);
}
h2 {
  @include responsive-prop(font-size, $global-h2-font-sizes);
}
h3 {
  @include responsive-prop(font-size, $global-h3-font-sizes);
}

// ----------------------------------------------------------------------------
// Bootstrap classes override
// ----------------------------------------------------------------------------

// Default button
.btn {
  display: inline-flex;
  justify-content: space-around;
  align-items: center;
  font-family: $global-txt-font;
  font-size: inherit;
  white-space: normal;
  box-shadow: 1px 1px 2px 0 rgba(0, 0, 0, 0.6);
  background-color: $color-green;
  cursor: pointer;

  &, &:hover, &:focus {
    color: $white;
  }
}

// ----------------------------------------------------------------------------
// Custom components
// ----------------------------------------------------------------------------
// BEM naming convention:
// block-name
// block-name--block-modifier
// block-name__element-name
// block-name__element-name--element-modifier

.page-header {
  background-color: $color-green;
  @include responsive-prop(padding, $header-paddings);

  .page-header__content {
    @extend .row;
    @extend .justify-content-between;

    .page-header__title-container {
      @extend .col-12;
      @extend .col-lg-auto;

      .page-header__title {
        text-align: center;

        .page-header__title-link {
          text-decoration: none;
          color: $header-title-txt-color !important;
        }
      }
    }
    .page-header__left-box {
      @extend .flex-lg-first;
      @extend .col-12;
      @extend .col-sm-auto;
      display: flex;
      justify-content: center;
    }
    .page-header__right-box {
      @extend .col-12;
      @extend .col-sm-auto;
      display: flex;
      justify-content: center;
    }
  }
}

.social-links {
  padding: $social-padding;
  margin-bottom: $spacer/2;

  .social-links__link {
    margin: $social-icon-margin;
    list-style: none outside none;
    display: inline-block;

    .social-links__icon {
      //@extend .fa;
      //@extend .fa-border;
      width: $social-icon-size;
      height: $social-icon-size;
      color: $social-icon-color;
      font-size: $social-icon-size*0.6;
      text-align: center;
      padding-top: $social-icon-size*0.17;
      border-radius: 50%;

      //&.social-links__icon--facebook {
      //  @extend .fa-facebook;
      //}
      //&.social-links__icon--pinterest {
      //  @extend .fa-pinterest-p;
      //}
      //&.social-links__icon--twitter {
      //  @extend .fa-twitter;
      //}
      //&.social-links__icon--instagram {
      //  @extend .fa-instagram;
      //}
    }
  }
}

.login-signup {
  @include responsive-prop(margin, $logsign-margins);
  font-size: $logsign-font-size;
  color: $logsign-txt-color;
  display: inline-block;

  .login-signup__link {
    color: $logsign-txt-color;
  }
}

.site-nav{
  @extend .navbar;                    
  @extend .navbar-toggleable-md;      
  @extend .navbar-light;              

  @include responsive-prop(margin, $site-nav-margins);
  min-height: $site-nav-collapsed-height;
  padding: $site-nav-padding;
  font-size: $site-nav-font-size;

  .site-nav__inner {
    @extend .container;
    margin: 0 auto;   // container doesn't auto-center for some reason

    .site-nav__toggler {
      @extend .navbar-toggler;          
        @extend .navbar-toggler-right;
      
      .site-nav__toggler-icon {
        @extend .navbar-toggler-icon;   
      }
    }

    .site-nav__content {
      @extend .collapse;              
      @extend .navbar-collapse;       
      @extend .d-lg-flex;
      padding: $site-nav-content-padding;

      .site-nav__links {
        @extend .navbar-nav;
        @extend .d-lg-flex;
        @extend .justify-content-lg-around;
        width: 100%;

        .site-nav__link-wrapper {
          @extend .nav-item;

          &.site-nav__link-wrapper--active {
            @extend .active;
          }

          .site-nav__link {
            @extend .nav-link;
            display: inline-block;  // shrink clickable area of link
          }
        }
      }

      .site-nav__form {
        @extend .form-inline;
        @extend .ml-lg-4;   // margins from bootstrap code sample
        @extend .my-2;
        @extend .my-lg-0;
        flex: 0 0 auto;
        width: $site-nav-search-width;

        .site-nav__search {
          @extend .input-group;

          .site-nav__search-input {
            @extend .form-control;
          }

          .site-nav__search-btn-wrapper {
            @extend .input-group-btn;
            // Override default "margin-left: -1px" to
            // prevent overwrapping of <input> right border:
            margin: 0;
            border: $site-nav-search-btn-border;

            .site-nav__search-btn {
              @extend .btn;
              box-shadow: none;
              font-size: $site-nav-search-btn-font-size;
              border: none;
              background-color: $color-grey-light;

              .site-nav__search-icon {
                color: $color-grey-dark;
              }
            }
          }
        }
      }
    }
  }
}

.txt-container {
  margin: $global-block-spacer 0;
  @include responsive-prop(font-size, $txt-container-font-sizes);
  text-align: center;
}

// Carousel classes can't be named with BEM methodology because their
// behavior is controlled by JavaScript in Bootstrap.
.carousel {
  &.carousel-inspiration {
    // Margin for absolute-positioned button
    @include responsive-prop(margin, $carousel-inspiration-margins);
    max-width: $carousel-inspiration-img-width;
  }

  &.carousel-makeovers {
    .carousel-inner {
      // Padding for low-placed caption in xs screens
      @include responsive-prop(padding, $crsl-inner-paddings);
    }
  }

  &.carousel-styles {
    background: url("../img/meshed-bg.png");
    background-size: 100%;

    .inner-wrapper {
      position: relative;
    }

    .carousel-inner .active.left {
      left: -33%;
    }
    .carousel-inner .next {
      left: 33%;
    }
    .carousel-inner .prev {
      left: -33%;
    }

    .carousel-item .picture {
      @extend .col-12;
      @extend .col-sm-4;

      h3 {
        @include responsive-prop(font-size, $crsl-styles-h3-font-sizes);
      }
    }

    .carousel-item:not(.prev) {
      visibility: visible;
    }
    .carousel-item.right:not(.prev) {
      visibility: hidden;
    }
    .rightest {
      visibility: visible;
    }
  }

  &.carousel-photo {
    @include responsive-prop(font-size, $crsl-photo-font-sizes);

    .carousel-item {
      flex-direction: column;

      .crsl-img-wrapper {
        position: relative;
        // In IE default is "0 1 auto" and because of this
        // contained image always has it's initial height (729px).
        // Override it:
        flex: 0 0 auto;

        img {
          width: 100%;
          display: block;
        }

        .carousel-img-photo-btns {
          position: absolute;
          bottom: 0;
          @include responsive-prop(transform, $crsl-img-btns-transforms);

          display: flex;
          @include responsive-prop(flex-direction, $crsl-img-btns-flex-dirs);
          width: 100%;
          justify-content: center;
          flex-wrap: wrap;

          .photo-crsl-img-left,
          button,
          a {
            @include responsive-prop(margin, $crsl-img-btns-margins);
            height: 38px;
          }
          button,
          a {
            padding: 0.2rem 0.5rem;
            font-size: 0.8rem;
          }
          .photo-crsl-img-left {
            button {
              background: $color-green no-repeat 0.5rem center;
              padding-left: 2.5rem;
              padding-top: 0.4rem;
            }
            .like {
              background-image: url("../img/icons/heart.png");
            }
            .dislike {
              background-image: url("../img/icons/smile-unhappy.png");
            }
          }
          .photo-crsl-img-right {
            a {
              background-color: $white;
              border: 1px solid $color-grey-light;
            }
          }
        }
      }

      .carousel-caption-photo {
        display: flex;
        @include responsive-prop(flex-direction, $crsl-photo-capt-flex-dir);
        @include responsive-prop(padding, $crsl-photo-capt-paddings);

        .crsl-capt-desc {
          text-align: left;
          @include responsive-prop(margin, $crsl-capt-desc-margins);
          @include responsive-prop(padding, $crsl-capt-desc-paddings);

          h3 {
            @include responsive-prop(font-size, $crsl-photo-header-font-sizes);
          }
          p {

          }
          a {
            float: right;
            font-size: 0.8em;
          }
        }
        .crsl-capt-links {
          margin: 0 auto;
          p {
            text-align: left;
          }
          .similar {
            display: flex;
            .similar__link + .similar__link {
              margin-left: 0.5rem;
            }
          }
          .social-links {
            margin: 0.5rem 0 0 0;
            padding: 0.5rem 0 0 0;
            border-top: 1px solid $color-grey-light;

            i {
              color: $color-grey-light;
            }
          }
        }
      }
    }
  }

  @include responsive-prop(margin, $crsl-margins);
  text-align: center;

  .carousel-header {
    @include responsive-prop(margin, $crsl-heading-margins);
    display: inline-block;
    @include responsive-prop(padding, $crsl-styles-header-paddings);
    background-color: $white;

    h2 {
      @include responsive-prop(margin, $crsl-header-margins);
    }
    p {
      @include responsive-prop(margin, $crsl-subheader-margins);
    }
  }

  .carousel-indicators {
    position: inherit;
    margin-left: 0;
    margin-right: 0;
    border-top: 1px solid $color-grey-light;//rgb(215, 215, 215);
    border-bottom: 1px solid $color-grey-light;//rgb(215, 215, 215);

    li {
      height: auto;
      width: auto;
      max-width: 100%;
      flex-grow: 0;
      @include responsive-prop(margin, $crsl-indicators-margins);
      @include responsive-prop(padding, $crsl-indicators-paddings);
      text-indent: 0;
      text-align: center;
      color: $crsl-indicators-inactive-color;
      background-color: transparent;

      &.active {
        color: $crsl-indicators-active-color;
        border-bottom: 3px solid $crsl-indicators-active-color;
      }
    }
  }

  .carousel-inner {
    .crsl-row-img-wrapper {
      flex: 1 1 auto;

      .carousel-item & {    // parent item
        justify-content: space-between;
      }

      &:not(:first-of-type) {
        margin-left: 0.5rem;
      }

      .crsl-row-img {
        width: 100%;        // fit image to max size allowed by wrapper
      }
    }

    .carousel-caption-center {
      @extend .carousel-caption;
      color: $global-txt-color;
      display: block;
      @include responsive-prop(width, $crsl-caption-widths);
      @include responsive-prop(bottom, $crsl-caption-bottoms);
      left: 50%;
      @include responsive-prop(transform, $crsl-caption-transforms);
      @include responsive-prop(padding, $crsl-caption-paddings);
      background-color: $crsl-caption-bg-color;
    }
  }

  // Height of controls is adjusted in JavaScript
  .carousel-control-next,
  .carousel-control-prev{
    @include responsive-prop(width, $crsl-controls-widths);

    i {
      font-size: $crsl-controls-size;
      width: 1em;
      height: 1em;
      color: $crsl-controls-arrow-color;
      text-align: center;
      margin: 0;
      padding: 0;
      line-height: 0.8em;
      border-radius: 50%;
      border: 3px solid $crsl-controls-border-color;
    }
  }
  .carousel-control-prev i { text-indent: -0.1em; }
  .carousel-control-next i { text-indent: 0.1em; }

  .carousel-overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: space-around;
    flex-direction: column;
    z-index: $crsl-ovrl-z-index;

    .overlay-header {
      @include responsive-prop(margin, $crsl-ovrl-header-margins);
      margin-top: auto; // Indent from top
      margin-bottom: auto; // fix IE fail with 'space-between'
      @include responsive-prop(font-size, $crsl-ovrl-header-font-sizes);
      color: $crsl-ovrl-header-color;
      width: 100%;
      text-align: center;
      text-shadow: $global-txt-shadow;
    }

    .overlay-txt {
      margin: 0;
      align-self: center;
      width: $crsl-ovrl-txt-width;
      @include responsive-prop(min-width, $crsl-ovrl-txt-min-widths);
      max-width: $crsl-ovrl-txt-max-width;
      @include responsive-prop(padding, $crsl-ovrl-txt-paddings);
      @include responsive-prop(font-size, $crsl-ovrl-txt-font-sizes);
      color: $crsl-ovrl-txt-color;
      text-align: center;
      background-color: $crsl-ovrl-txt-bg-color;
    }

    .overlay-btn {
      @extend .btn;
      position: absolute;
      @include responsive-prop(bottom, $crsl-ovrl-btn-bottoms);
      left: 50%;
      @include responsive-prop(transform, $cral-ovrl-btn-transforms);
      @include responsive-prop(padding, $crsl-ovrl-btn-paddings);
    }
  }
}

.ideas {
  @include responsive-prop(margin, $ideas-margins);

  // TODO: replace with .header--underlined
  .ideas__hdr-wrapper {
    @include responsive-prop(margin, $ideas-header-margins);
    @include responsive-prop(padding, $ideas-header-paddings);

    .ideas__hdr {
      display: inline;
      border-bottom: 2px solid $color-green;
    }
  }

  .ideas__list {
    @extend .list-unstyled;

    .ideas__idea {
      display: flex;
      @include responsive-prop(flex-direction, $idea-flex-directions);
      @include responsive-prop(align-items, $idea-align-items);
      @include responsive-prop(margin, $idea-margins);

      .ideas__idea-img {
        width: 50%;
        flex: 0 0 auto;
        @include responsive-prop(margin, $idea-img-margins);
      }
      .ideas__idea-body {
        @include responsive-prop(padding, $idea-body-paddings);

        .ideas__idea-floats-wrapper {
          @include responsive-prop(padding, $idea-floats-wrapper-padding);
          @include responsive-prop(font-size, $idea-floats-font-sizes);
          @extend .clearfix;

          .ideas__idea-tags { float: left;}
          .ideas__idea-date { float: right;}
        }

        .ideas__idea-hdr {
          @include responsive-prop(margin, $idea-header-margins);
        }
        .ideas__idea-teaser{
          @include responsive-prop(font-size, $idea-teaser-font-sizes);
          line-height: $idea-teaser-line-height;
        }

        // ? TODO: replace with .btn--narrow ?
        .ideas__idea-btn-wrapper {
          display: flex;
          justify-content: center;
          @include responsive-prop(padding, $idea-btn-wrapper-paddings);

          .ideas__idea-btn {
            @extend .btn;
            @include responsive-prop(padding, $idea-btn-paddings);
          }
        }
      }
    }
  }

  // TODO: replace with .btn-wide
  .ideas__btn-wrapper {
    display: flex;
    justify-content: center;
    @include responsive-prop(padding, $ideas-btn-wrapper-paddings);

    .ideas__btn {
      @extend .btn;
      width: 50%;
      @include responsive-prop(min-width, $ideas-btn-min-widths);
      @include responsive-prop(padding, $ideas-btn-paddings);
      font-size: $ideas-btn-font-size;
    }
  }
}

.picture {
  display: inline-block;
  position: relative;

  &:hover, &:focus {      // If this class is assigned to link
    text-decoration: none;
  }

  .picture__img {
    width: 100%;
  }

  .picture__caption {
    @include responsive-prop(font-size, $picture-caption-font-sizes);
    text-align: center;
    text-decoration: none;
    color: $global-txt-color;
    @include responsive-prop(padding, $picture-caption-paddings);

    &.picture__caption--align-left {
      text-align: left;
      padding: 0.5em;
      min-height: 3em;
    }
  }

  .picture__caption-overlay {
    background: rgba(255, 255, 255, 0.6);
    position: absolute;
    bottom: 5%;
    left: 5%;
    right: 5%;
    padding: 0.5em;
    @include responsive-prop(font-size, $picture-capt-ovrl-font-size);
    color: $global-txt-color;
  }

  .picture__add-photo {
    position: absolute;
    top: 5%;
    right: 5%;
    width: 50px;
    height: 50px;
    border-radius: 3px;
    background: url("../img/icons/photo-camera-plus.png")
                no-repeat rgba(255, 255, 255, 0.6) ;
    background-position: 75% 40%;
    background-size: 80%;
  }
}

.gallery {
  @include responsive-prop(margin, $gallery-margins);
  position: relative;

  a {
    text-decoration: none;
  }

  .gallery__view-all {
    position: absolute;
    @include responsive-prop(top, $gallery-viewall-tops);
    right: 0;
    @include responsive-prop(font-size, $gallery-viewall-font-sizes);
    color: $color-grey-light;
    @include responsive-prop(margin, $gallery-header-margins);
    padding: $gallery-viewall-padding;
  }

  .gallery__header {
    text-align: center;
    @include responsive-prop(margin, $gallery-header-margins);
    @include responsive-prop(padding, $gallery-header-paddings);

    &.gallery__header--line {
      border-bottom: 1px solid $color-grey-light;
    }

    &.gallery__header--big-margin {
      @include responsive-prop(margin, $gallery-header-big-margins);
    }
  }

  .gallery__body {
    @extend .row;
    margin: 0;
    justify-content: center;

    .gallery__item {
      @extend .gallery--24444;  // by default
      padding: $gallery-item-padding;

      .gallery__link {

      }

      .gallery__add-item-wrapper {
        height: 100%;
        border: 1px dashed $color-grey-light;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: $gallery-add-item-wrapper-padding;

        .gallery__add-item-btn {
          @extend .btn;
          border-color: $color-grey-light;
          @include responsive-prop(font-size, $gallery-add-btn-font-sizes);
          font-family: $global-txt-font;
          &, &:hover, &:focus {
            color: $color-grey-light;
          }
          white-space: normal;
          background: transparent url("../img/icons/photo-camera.png")
                      no-repeat 0.5em center;
          padding: $gallery-add-btn-padding;
          box-shadow: none;
        }
      }
    }
  }

  // TODO: replace with .btn--wide
  .gallery__wide-btn-wrapper {
    padding: 1rem 15%;

    .gallery__wide-btn {
      @extend .btn;
      width: 100%;
    }
  }

  // Gallery columns number: xs|sm|md|lg|xl
  &.gallery--44444 {
    .gallery__item {
      @include make-col(1, 4);
    }
  }
  &.gallery--22233 {
    .gallery__item {
      @include make-col(1, 2);

      @include media-breakpoint-up(lg) {
        @include make-col(1, 3);
      }
    }
  }
  &.gallery--22344 {
    .gallery__item {
      @include make-col(1, 2);

      @include media-breakpoint-up(md) {
        @include make-col(1, 3);
      }
      @include media-breakpoint-up(lg) {
        @include make-col(1, 4);
      }
    }
  }
  &.gallery--24444 {
    .gallery__item {
      @include make-col(1, 2);

      @include media-breakpoint-up(sm) {
        @include make-col(1, 4);
      }
    }
  }
  &.gallery--24555 {
    .gallery__item {
      @include make-col(1, 2);

      @include media-breakpoint-up(sm) {
        @include make-col(1, 4);
      }
      @include media-breakpoint-up(md) {
        @include make-col(1, 5);
      }
    }
  }
}

.shop {
  @include responsive-prop(margin, $shop-margins);

  // TODO: replace with .header--underlined
  .shop__header-wrapper {
    @include responsive-prop(margin, $shop-header-margins);
    @include responsive-prop(padding, $shop-header-paddings);

    .shop__header {
      display: inline;
      border-bottom: 2px solid $brand-primary;
    }
  }

  // TODO: replace with .btn--wide (narrow)
  .shop__btn-wrapper {
    display: flex;
    justify-content: center;
    @include responsive-prop(padding, $shop-btn-wrapper-paddings);

    .shop__btn {
      @extend .btn;
      font-size: $shop-btn-font-size;
      @include responsive-prop(padding, $shop-btn-paddings);
      box-shadow: 2px 2px 5px 0 rgba(1, 1, 1, 0.5);
    }
  }
}


.breadcrumb {
  @include responsive-prop(margin, $brdcrmb-margins);
  @include responsive-prop(font-size, $brdcrmb-font-sizes);
  padding-left: 0;
  padding-right: 0;

  .breadcrumb__item {
    @extend .breadcrumb-item;

    &.breadcrumn__item--active {
      @extend .active;
    }

    .breadcrumb__link {
      color: $color-grey-light;
    }
  }
}


.upload {
  @include responsive-prop(margin, $upload-margins);

  .upload__hdr-cntnr {
    text-align: center;
    @include responsive-prop(margin, $upload-hdr-cntnr-margins);
    @include responsive-prop(padding, $upload-hdr-cntnr-paddings);
    background: url("../img/meshed-bg.png");
    background-size: 100%;

    .upload__hdr {
      display: inline-block;
      @include responsive-prop(font-size, $upload-hdr-font-sizes);
      @include responsive-prop(padding, $upload-hdr-paddings);
      background-color: $white;
    }
  }

  .upload__txt {
    @include responsive-prop(padding, $upload-txt-paddings);
  }

  .upload__form{
    @include responsive-prop(padding, $upload-form-paddings);

    .upload__form-group {
      @extend .form-group;

      .upload__lbl--rqd {
        &:after {
          content: '*';
          color: red;
        }
      }
      .upload__form-control {
        @extend .form-control;
        border-color: $color-grey-light;
        color: $color-grey-light;

        option, option:focus {
          color: $color-grey-light !important;
        }
      }
    }

    .upload__fileloader-wrapper {
      border: 2px dashed $color-grey-light;
      position: relative;
      @include responsive-prop(height, $upload-fileloader-wrapper-heights);
      display: flex;
      flex-direction: column;
      justify-content: space-around;
      align-items: center;
      @include responsive-prop(padding, $upload-fileloader-wrapper-paddings);

      .upload__fileloader {
        position: absolute;
        top:0;
        right: 0;
        bottom: 0;
        left: 0;
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        outline: none;
        opacity: 0;
        cursor: pointer;
      }

      .upload__fileloader-images {
        display: flex;

        .upload__fileloader-img-wrapper {
          margin: 0 1rem;

          .upload__fileloader-img {
            width: 50px;
            height: 50px;
            background: url("../img/icons/upload-img.png") no-repeat;
            background-size: contain;
          }
          .upload__fileloader-img-caption {
            font-size: 0.8em;
            color: $color-grey-light;
            text-align: center;
          }
        }
      }

      .upload__fileloader-caption{
        text-align: center;
        color: $color-grey-light;
        max-width: 100%;  // For text wrapping in IE.
      }
    }

    .upload__disclaimer{
      @include responsive-prop(margin, $upload-disclaimer-margins);
    }

    .upload__btn-wrapper {
      padding: 2rem 0;
      display: flex;
      justify-content: center;
      align-items: center;
      border-top: 2px solid $color-grey-light;

      .upload__btn {
        @extend .btn;
        background-color: $color-green;
        font-size: 1em;
        color: $white;
        margin: 0;
        @include responsive-prop(padding, $upload-btn-paddings);
        box-shadow: 1px 1px 2px 0 rgba(0, 0, 0, 0.6);
        max-width: 100%;
      }
    }
  }
}


.profile-cover {
  position: relative;
  @include responsive-prop(margin, $profile-cover-margins);
  font-size: 1rem;

  .profile-cover__img {
    width: 100%;
  }

  .profile-cover__img-change {
    @extend .btn;
    position: absolute;
    top: 10%;
    left: 3%;

    background: $black;
    border: 2px solid $white;
    font-size: 0.8em;
    color: $white;
    padding: 0.5rem;
  }
  .profile-cover__view-profile {
    position: absolute;
    bottom: 10%;
    right: 3%;
    text-decoration: none;
    color: $white;
    text-shadow: 1px 1px 0 rgba(1, 1, 1, 0.33);
  }
}

.profile-nav {
  @include responsive-prop(margin, $profile-nav-margins);
  @include responsive-prop(padding, $profile-nav-paddings);
  font-size: 1rem;

  .profile-nav__item {
    display: inline-block;

    + .profile-nav__item {  // &+& not working !!!
      margin-left: 1em;
    }

    .profile-nav__link {
      text-decoration: none;
      color: $global-txt-color;
    }

    &.profile-nav__item--active {
      .profile-nav__link {
        color: $color-green;
        font-weight: bold;
      }
    }
  }
}

.prefs {
  @include responsive-prop(margin, $prefs-margins);
  @include responsive-prop(padding, $prefs-paddings);
  @include responsive-prop(border-left, $prefs-border-lefts);
  font-size: 1rem;

  .prefs__hdr-wrapper {
    @include responsive-prop(margin, $prefs-hdr-wrapper-margins);

    .prefs__hdr {
      display: inline-block;
      border-bottom: 2px solid $color-green;
      padding: 0.3rem;
      @include responsive-prop(font-size, $prefs-hdr-font-size);
    }
  }

  .prefs__subhdr {
    color: $black;
    font-weight: bold;
  }

  .prefs__list {
    list-style: none;
    padding: 0;

    .prefs__list-item {
      display: inline;
      white-space: nowrap;
    }
    .prefs__list-item+.prefs__list-item:before {
      content: '| ';
    }
  }
}

.tidings {
  @include responsive-prop(margin, $tidings-margins);
  margin-bottom: 0 !important;

  .tidings__hdr {

  }

  .tidings__status {
    @include responsive-prop(margin, $tidings-status-margins);
    padding: 1rem;
    padding-left: 4rem;
    background: $color-green url("../img/icons/status-speech-baloon.png")
                no-repeat 1rem center;
    border-radius: $global-border-radius;

    .tidings__status-input-wrapper {
      position: relative;

      .tidings__status-input {
        border: none;
        border-radius: $global-border-radius;
        padding: 0.2em 0.5em;
        width: 100%;

      }
      &:before {
        content: '';
        display: block;
        position: absolute;
        top: 50%;
        left: 0;
        transform: translate(-100%, -50%);;
        @include triangle(left, 8px, $white);
      }
    }
  }

  .tidings__tiding {
    border: 1px solid $color-grey-light;

    .tidings__tiding-content {
      display: flex;
      align-items: flex-start;
      padding: 1rem;
      position: relative;

      .tidings__tiding-img {
        flex: 0 0 auto;
        margin: 0 1rem 0 0;
        @extend .hidden-md-down;
      }
      .tidings__tiding-txt {
        align-self: center;
        font-style: italic;
      }
      .tidings__tiding-time {
        position: absolute;
        right: 0;
        bottom: 0;
        font-size: 0.8em;
        color: $color-grey-light;
        padding: 0.5em;
      }
    }
    .tidings__tiding-actions {
      border-top: 1px solid $color-grey-light;
      @include responsive-prop(padding, $tiding-actions-paddings);

      .tidings__tiding-btn {
        @extend .btn;
        box-shadow: none;
        display: inline-block;
        background: transparent no-repeat 0.5rem center;
        border: none;
        padding: 0.5rem;
        padding-left: 3rem;
        &, &:hover, &:focus {
          color: $color-grey-light;
        }
        font-size: 0.8em;
        margin: 0 0.5rem;
      }
      .tidings__tiding-btn--like {
        background-image: url("../img/icons/tiding-heart.png")
      }
      .tidings__tiding-btn--comment {
        background-image: url("../img/icons/tiding-speech.png")
      }
    }
  }

  .tidings__more-btn {
    @extend .btn;
    background-color: $white;
    border: 1px solid $color-grey-light;
    box-shadow: 1px 1px 2px 0 rgba(0, 0, 0, 0.33);
    width: 100%;
    padding: 1em;
    font-family: $global-txt-font;
    font-size: 1em;
    &, &:hover, &:focus {
      color: $global-txt-color;
    }
    @include responsive-prop(margin, $tidings-more-btn-margins);
    margin-bottom: 0 !important;
  }
}

.profile {
  @include responsive-prop(margin, $profile-margins);
  @include responsive-prop(position, $profile-positions);
  @include responsive-prop(top, $profile-tops);
  flex: 0 0 auto;
  display: flex;
  @include responsive-prop(flex-direction, $profile-flex-directions);
  @include responsive-prop(align-items, $profile-align-items);

  .profile__left, .profile__right {
    width: 250px;
  }

  .profile__left {
    @include responsive-prop(border-bottom, $profile-left-border-bottom);
    @include responsive-prop(margin, $profile-left-margin);
    @include responsive-prop(padding, $profile-left-padding);
  }

  &>*>* {
    margin: 1rem 0 0 0;
  }

  .picture__img {
    border: 1px solid $white;
  }
  .picture__caption {
    font-size: 1em;
  }

  .profile__link {
    @include responsive-prop(font-size, $profile-smaller-font-sizes);
    text-decoration: none;
    color: $color-green;
    display: block; // FF displayed links in line

    & + .profile__link {
      margin-top: 0.5rem;
    }
  }

  .profile__btn {
    @extend .btn;
    font-size: 1em;
    width: 100%;
  }

  .profile__subscr {
    display: flex;
    border: 1px solid $color-grey-light;
    border-radius: 3px;
    text-align: center;
    @include responsive-prop(font-size, $profile-smaller-font-sizes);

    .profile__subscribers {
      border-right: 1px solid $color-grey-light;
    }
    .profile__subscribers, .profile__subscribings {
      width: 50%;
      padding: 0.5rem;
      color: $color-grey-light;
    }
  }

  .profile__hdr {
    font-weight: bold;
    font-size: 1.3rem;

    & + .profile__txt {
      margin: 0.5rem 0 1.5rem 0;
    }
  }

  .profile__txt {
    color: $color-grey-dark;
    @include responsive-prop(font-size, $profile-smaller-font-sizes);
    & + .profile__progress {
      margin-top: 0.5rem;
    }
  }

  .profile__progress {
    @extend .progress;
    margin-top: 0;
    height: $profile-progress-height;
    border: 1px solid $color-grey-light;
    border-radius: $profile-progress-border-radius;
    background: $white;
    box-shadow: inset 0 0 8px 1px $color-grey-light;

    .profile__progress-bar {
      @extend .progress-bar;
      position: relative;
      height: 100%;
      background-color: $color-green;
      border-radius: $profile-progress-border-radius;

      .profile__progress-handle {
        position: absolute;
        top: 50%;
        right: calc(#{$profile-progress-border-radius} - 2px);
        transform: translate(0, -50%);
        width: $profile-progress-height * 0.5;
        height: $profile-progress-height * 0.5;
        border-radius: 50%;
        border: 2px solid $white;
        background-color: $color-grey-light;
      }
    }
  }
}

.profile-wrapper {
  padding-bottom: 2rem;
  border-bottom: 1px solid $color-grey-light;
  position: relative;
}


.articles-upper {
  @include responsive-prop(margin, $articles-upper-margin);
  display: flex;
  @include responsive-prop(flex-direction, $articles-upper-flexdir);
  align-content: flex-start;
}

.linklist-v {
  flex: 0 0 auto;
  font-size: $linklist-v-font-size;
  @include responsive-prop(margin, $linklist-v-margin);

  .linklist-v__hdr {
    font-size: $linklist-v-hdr-font-size;
    margin: $linklist-v-hdr-margin;
  }
  .linklist-v__link {
    display: block;
    color: $global-txt-color;
    @include responsive-prop(margin, $linklist-v-link-margin);

    &:hover,
    &:focus {
      text-decoration: underline;
    }

    &.linklist-v__link--active {
      color: $color-green;
      text-decoration: underline;
    }
  }
}

.upper-article {
  position: relative;
  height: 100%;   // fit to height of nested img.upper-article__img
  flex: 0 1 auto;

  .upper-article__img {
    width: 100%;
  }

  .upper-article__caption {
    // Non-flex in narrow screens - because of IE11 fail with "flex-direction: column".
    // flexbox with 'column' is replaced with "display: block".
    @include responsive-prop(position, $upper-art-capt-position);
    right: 0;
    left: 0;
    top: auto;
    bottom: 0;

    @include responsive-prop(display, $upper-art-capt-display);
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    background: rgba(0, 0, 0, 0.5);
    padding: $upper-art-capt-padding;
    width: 100%;

    .upper-article__name,
    .upper-article__btn-wrapper {
      margin: $upper-art-capt-items-margin;
    }

    .upper-article__name {
      flex: 0 1 auto;
      font-size: $upper-art-name-font-size;
      color: $white;
    }

    .upper-article__btn-wrapper {
      flex: 0 0 auto;
      @include responsive-prop(padding, $upper-art-btn-wrapper-padding);

      .upper-article__btn {
        @extend .btn;
        box-shadow: none; // remove default shadow (from .btn)
        @include responsive-prop(padding, $upper-art-btn-padding);
        width: 100%;
      }
    }
  }
}

.art-thmb {
  padding: $art-thmb-padding;

  height: 100%;
  display: flex;
  flex-direction: column;

  .art-thmb__inner {
    //flex: 1 (1 1 0%) - not working in IE11
    flex: 1 1 auto;        // resizable
    display: flex;
    flex-direction: column;

    position: relative;
    background-color: $art-thmb-inner-bg;
    border-radius: $art-thmb-inner-border-radius;

    .art-thmb__rubric {
      position: absolute;
      top: $art-thmb-rubric-top;
      right: $art-thmb-rubric-right;
      bottom: auto;
      left: auto;

      font-size: $art-thmb-rubric-font-size;
      padding: $art-thmb-rubric-padding;
      background: $art-thmb-rubric-bg;
    }
    .art-thmb__img {
      flex: 0 0 auto;        // not resizable
      width: 100%;
    }
    .art-thmb__txt {
      flex: 1 1 auto;//flex: 1;        // resizable
      padding: $art-thmb-txt-padding;
      display: flex;
      flex-direction: column;

      .art-thmb__hdr-wrapper {
        flex: 1 1 auto;//flex: 1;        // resizable
        margin: $art-thmb-hdr-wrapper-margin;
        display: flex;

        .art-thmb__hdr {
          align-self: center;
          margin: 0;
          font-size: $art-thmb-hdr-font-size;
          text-align: center;
          width: 100%;
        }
      }
      .art-thmb__teaser {
        flex: 0 0 auto;        // not resizable
        font-size: $art-thmb-teaser-font-size;
        text-align: left;
        margin: $art-thmb-teaser-margin;
        hyphens: auto;        // NOT SUPPORTED BY CHROME
      }
      .art-thmb__date {
        flex: 0 0 auto;        // not resizable
        font-size: $art-thmb-date-font-size;
        text-align: right;
        margin: 0;
      }
    }
  }

  .art-thmb__btns {
    flex: 0 0 auto;        // not resizable

    display: flex;
    justify-content: space-around;

    .art-thmb__read {
      @extend .btn;
      padding: $art-thmb-read-padding;
      position: relative;
      top: $art-thmb-read-top;
      height: 100%;
    }
    .art-thmb__read--red {
      background-color: $color-red;
    }

    .art-thmb__likes,
    .art-thmb__comments {
      @extend .btn;
      background: none;
      border: none;
      box-shadow: none;
      font-size: $art-thmb-lowbtns-font-size;
      padding: $art-thmb-lowbtns-padding;

      &, &:hover, &:focus {
        color: $color-grey-light;
      }

      &:before {
        content: "";
        width: $art-thmb-lowbtns-icon-width;
        height: 1em;
        background: no-repeat 0 center;
        background-size: contain;
      }
    }
    .art-thmb__likes:before {
      background-image: url("../img/icons/tiding-heart.png");
    }
    .art-thmb__comments:before {
      background-image: url("../img/icons/tiding-speech.png");
    }
    .art-thmb__likes {
      order: -1;
    }
  }
}


.heading-meshed {
  @include responsive-prop(margin, $hdng-mshd-margin);
  padding: $hdng-mshd-padding;
  background: url("../img/meshed-bg.png");
  background-size: 100%;
  text-align: center;

  .heading-meshed__hdr {
    display: inline-block;
    padding: $hdng-mshd-hdr-padding;
    background-color: $white;
    margin: 0;
  }
}

.filter-wrapper {
  display: flex;
  @include responsive-prop(flex-direction, $filter-wrapper-flexdir);
}

.filter {
  flex: 0 0 auto;
  width: $filter-width;
  @include responsive-prop(font-size, $filter-font-size);
  list-style: none;
  margin: $filter-margin;
  border-right: 1px solid $color-grey-light;

  .filter__cat-name {
    @include responsive-prop(margin, $filter-cat-name-margin);
    @include responsive-prop(padding, $filter-cat-name-padding);
    border-bottom: 1px solid $color-grey-light;
  }

  .filter__link,
  .filter__chb-label {
    margin: $filter-choose-margin;
    display: block;
  }

  .filter__link {
    margin-left: $filter-link-margin-left;
    color: $global-txt-color;
    text-decoration: none;

    &.filter__link--active {
      color: $color-green;
    }
  }

  .filter__chb {          // hide default checkbox
    display: none;
  }
  .filter__chb-label {
    margin-left: $filter-chb-label-ml;
    cursor: pointer;
    position: relative;

    .filter__small {
      font-size: $filter-small-font-size;
      font-style: italic;
    }

    .filter__chb-new {    // custom checkbox instead of default
      display: inline-block;
      vertical-align: top;
      margin: $filter-chb-margin;
      box-shadow: 0 0 0 2px $color-grey-dark;

      @include responsive-prop(width, $filter-chb-size);
      @include responsive-prop(height, $filter-chb-size);
      border: $filter-chb-border-width solid $white;
      background: $white;
      border-radius: $filter-chb-border-radius;

      .filter__chb-new-bg {
        display: block;
        border-radius: $filter-chb-bg-border-radius;
        width: 100%;
        height: 100%;
        background-color: $white;
      }
    }
  }

  // background is switched on check/uncheck
  .filter__chb:checked + .filter__chb-label .filter__chb-new-bg {
    background: $color-green;
  }
}

.color-square {
  width: $color-square-size;
  height: $color-square-size;
  border: $color-square-border;

  *:nth-of-type(1) >*>& { background-color: $black; }
  *:nth-of-type(2) >*>& { background-color: rgb(210, 102, 54); }
  *:nth-of-type(3) >*>& { background-color: rgb(152, 102, 49); }
  *:nth-of-type(4) >*>& { background-color: rgb(226, 92, 91); }

  *:nth-of-type(5) >*>& { background-color: $white; }
  *:nth-of-type(6) >*>& { background-color: rgb(120, 83, 64); }
  *:nth-of-type(7) >*>& { background-color: rgb(43, 126, 130); }
  *:nth-of-type(8) >*>& { background-color: rgb(159, 57, 53); }

  *:nth-of-type(9) >*>& { background-color: rgb(80, 49, 67); }
  *:nth-of-type(10) >*>& { background-color: rgb(21, 54, 85); }
  *:nth-of-type(11) >*>& { background-color: rgb(213, 141, 20); }
  *:nth-of-type(12) >*>& { background-color: rgb(226, 30, 34); }

  *:nth-of-type(13) >*>& { background-color: rgb(84, 89, 92); }
  *:nth-of-type(14) >*>& { background-color: rgb(0, 168, 171); }
  *:nth-of-type(15) >*>& { background-color: rgb(77, 93, 54); }
  *:nth-of-type(16) >*>& { background-color: rgb(147, 192, 41); }

  *:nth-of-type(17) >*>& { background-color: rgb(172, 158, 147); }
  *:nth-of-type(18) >*>& { background-color: rgb(103, 118, 87); }
  *:nth-of-type(19) >*>& { background-color: rgb(235, 128, 24); }
  *:nth-of-type(20) >*>& { background-color: rgb(0, 107, 113); }
}

.filter-show {
  @include responsive-prop(margin, $filter-show-margin);
  border: 1px solid $color-grey-dark;
  padding: $filter-show-padding;
  font-size: $filter-show-font-size;
  line-height: $filter-show-line-height;

  &>* {
    display: inline;
    white-space: nowrap;  // prevent badge wrapping to newline
  }

  .filter-show__heading {
    color: $color-green;
    &:after {
      content:"";
      display: inline-block;
      @include triangle(right, $filter-show-triangle-size, $color-green);
      margin-left: $filter-show-triangle-margin-left;
    }
  }

  .filter-show__cat {
    margin-left: $filter-show-cat-margin-left;
    color: $color-green;
    &:after {
      content:":";
    }
  }

  .filter-show__val {
    margin-left: $filter-show-val-margin-left;
    color: $color-grey-light;
    &:after {   // "close" badge
      content: "";
      display: inline-block;
      vertical-align: middle;
      height: $filter-show-close-size;
      width: $filter-show-close-size;
      border-radius: $filter-show-close-border-radius;
      background: $color-green url("../img/icons/close-white.png") no-repeat center;
      background-size: $filter-show-close-cross-size;
      margin-left: $filter-show-close-margin-left;
      cursor: pointer;
    }
  }
}

.photo-sel {
  font-size: $photo-sel-font-size;
  @include responsive-prop(margin, $photo-sel-margin);

  .photo-sel__sel-wrapper {
    display: flex;
    flex-direction: row;
    @include responsive-prop(flex-direction, $photo-sel-wrapper-flexdir);
    justify-content: space-between;

    .photo-sel__select {
      //font-size: 0.7em;
      @include responsive-prop(margin, $photo-sel-select-margin);
      padding: $photo-sel-select-padding;
      color: $global-txt-color;
    }
    .photo-sel__range {
      //font-size: 0.7em;
      text-align: right;

      .photo-sel__prev,
      .photo-sel__next {
        font-size: $photo-sel-arrow-size;
        width: 1em;
        height: 1em;
        color: $color-green;
        text-align: center;
        margin: 0;
        padding: 0;
        line-height: 0.85em;
        vertical-align: sub;
        border-radius: 50%;
        border: 2px solid $color-grey-light;
        cursor: pointer;
      }
      .photo-sel__prev {
        text-indent: -0.1em;
      }
      .photo-sel__next {
        text-indent: 0.1em;
      }
    }
  }
}

.pgntn {
  @include responsive-prop(margin, $pgntn-margin);
  padding: 0 1em;
  text-align: center;

  .pgntn__inner {
    @extend .pagination;
    display: inline-flex;
    margin: 0;
    border: none;
    border-radius: 0;

    .pgntn__item {
      @extend .page-item;
      display: inline-block;
      border-top: 1px solid $color-grey-dark;
      border-bottom: 1px solid $color-grey-dark;

      &.pgntn__item--active {
        background-color: $color-grey-light;
        border: 1px solid $color-grey-dark;
      }
      &.pgntn__item--ctrl {
        background-color: $color-green;
        border: none;
        .pgntn__link, .pgntn__link:hover {
          color: $white;
        }
      }

      .pgntn__link {
        @extend .page-link;
        border: none;
        background-color: transparent;
        color: $global-txt-color;
        padding: 0.3em 0.7em;
        &:hover {
          background-color: transparent;
          color: $global-txt-color;
        }
      }
    }
  }
}

